

package com.example.examplemod.Module.EXPLOIT;

import com.example.examplemod.ExampleMod;
import com.example.examplemod.Module.Module;
import net.minecraft.client.Minecraft;
import net.minecraftforge.fml.common.eventhandler.SubscribeEvent;
import net.minecraftforge.fml.common.gameevent.TickEvent;
import yea.bushroot.clickgui.Setting;

public class AutoRTP extends Module {
    private long lastCommandTime = 0L;
    private int delay = 300;

    public AutoRTP() {
        super("AutoRTP", 0, Category.EXPLOIT);
        ExampleMod.instance.settingsManager.rSetting(new Setting("Delay (seconds)", this, 300.0, 10.0, 1800.0, true));
    }

    public void onEnable() {
        this.lastCommandTime = System.currentTimeMillis();
        super.onEnable();
    }

    public void onDisable() {
        super.onDisable();
    }

    @SubscribeEvent
    public void onPlayerTick(TickEvent.PlayerTickEvent event) {
        if (Minecraft.getMinecraft().player != null && Minecraft.getMinecraft().world != null) {
            this.delay = (int)ExampleMod.instance.settingsManager.getSettingByName(this.name, "Delay (seconds)").getValDouble();
            if (System.currentTimeMillis() - this.lastCommandTime >= (long)this.delay * 1000L) {
                Minecraft.getMinecraft().player.sendChatMessage("/randomloc");
                this.lastCommandTime = System.currentTimeMillis();
            }

        }
    }
}
